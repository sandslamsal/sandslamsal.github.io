function runComprehensiveTests(){function e(){if(l>=t.length){console.log("\n=== TEST SUMMARY ==="),t.forEach(e=>{const t=e.result?.pass?"\u2713":"\u2717";console.log(`${t} ${e.name}: ${e.result?.pass?"PASS":"FAIL"}`),e.result?.details&&console.log(`   ${e.result.details}`)});const e=t.filter(e=>e.result?.pass).length;return console.log(`\nResults: ${e}/${t.length} tests passed`),void(e===t.length?console.log("\ud83c\udf89 All tests PASSED! Pile cap app is working correctly."):console.log("\u26a0\ufe0f  Some tests failed. Check details above."))}const n=t[l];console.log(`\n${l+1}. Running: ${n.name}`),n.setup(),document.getElementById("pc-analyze").click(),setTimeout(()=>{n.result=n.validate(),console.log(`   Result: ${n.result.pass?"PASS":"FAIL"} - ${n.result.details}`),l++,e()},1e3)}console.log("=== Pile Cap Comprehensive Test Suite ==="),console.log("Testing both calculations and UI functionality");const t=[];t.push({name:"Basic Single Load Case",setup:()=>{document.getElementById("pc-load-p").value="5000",document.getElementById("pc-mx").value="200",document.getElementById("pc-my").value="150",document.getElementById("pc-coords").value="0,0\n3,0\n3,2\n0,2",document.getElementById("pc-allow-comp").value="1500",document.getElementById("pc-allow-ten").value="100",document.getElementById("pc-fc").value="35",document.getElementById("pc-diameter").value="0.4",document.getElementById("pc-cap-thk").value="0.9",document.getElementById("pc-loadcases").value=""},validate:()=>{const e=document.getElementById("pc-status").textContent,t=!document.getElementById("pc-results").hidden,l=document.querySelectorAll("#pc-table tbody tr");return{pass:t&&4===l.length&&e.includes("Analysis complete"),details:`Status: ${e}, Piles: ${l.length}, Results visible: ${t}`}}}),t.push({name:"Multi Load Case Analysis",setup:()=>{document.getElementById("pc-loadcases").value="LC1 5000 200 150\nLC2 6000 -100 250\nLC3 4500 300 -50"},validate:()=>{const e=document.getElementById("pc-mc-table"),t=document.getElementById("pc-str-table"),l=document.getElementById("pc-gov-table");return{pass:e&&!e.hidden&&t&&!t.hidden&&l&&!l.hidden,details:`Multi-case tables visible: ${e&&!e.hidden}, ${t&&!t.hidden}, ${l&&!l.hidden}`}}}),t.push({name:"Iterative Tension Redistribution",setup:()=>{document.getElementById("pc-load-p").value="3000",document.getElementById("pc-mx").value="3000",document.getElementById("pc-my").value="0",document.getElementById("pc-loadcases").value="",document.getElementById("pc-iter-enabled").checked=!0},validate:()=>{const e=document.querySelectorAll("#pc-table tbody tr");let t=!1;for(let l of e){parseFloat(l.cells[3].textContent)<=.001&&(t=!0)}return{pass:t,details:`Tension redistribution working: ${t}`}}}),t.push({name:"Export Functions",setup:()=>{},validate:()=>{const e=document.getElementById("pc-export-json"),t=document.getElementById("pc-export-csv");return{pass:e&&t&&!e.disabled&&!t.disabled,details:`Export buttons available: JSON=${e&&!e.disabled}, CSV=${t&&!t.disabled}`}}}),t.push({name:"Input Validation",setup:()=>{document.getElementById("pc-load-p").value="invalid",document.getElementById("pc-coords").value="bad,data\ninvalid"},validate:()=>{const e=document.getElementById("pc-status").textContent;return{pass:e.includes("Error")||e.includes("Invalid"),details:`Error handling: ${e}`}}});let l=0;e()}function verifyCalculations(){console.log("\n=== Mathematical Verification ===");const e=[{x:0,y:0},{x:3,y:0},{x:3,y:2},{x:0,y:2}],t=5e3,l=0,n=0;document.getElementById("pc-load-p").value=t,document.getElementById("pc-mx").value=l,document.getElementById("pc-my").value=n,document.getElementById("pc-coords").value=e.map(e=>`${e.x},${e.y}`).join("\n"),document.getElementById("pc-loadcases").value="",document.getElementById("pc-analyze").click(),setTimeout(()=>{const l=document.querySelectorAll("#pc-table tbody tr"),n=Array.from(l).map(e=>parseFloat(e.cells[3].textContent)),o=t/e.length;console.log("Expected reaction per pile:",o,"kN"),console.log("Calculated reactions:",n,"kN");const c=.001,a=n.every(e=>Math.abs(e-o)<c);console.log("Mathematical accuracy:",a?"PASS":"FAIL"),a?console.log("\u2713 Rigid pile cap equations verified"):console.log("\u2717 Mathematical error detected")},500)}function quickTest(){console.log("Running quick smoke test..."),document.getElementById("pc-load-p").value="1000",document.getElementById("pc-mx").value="0",document.getElementById("pc-my").value="0",document.getElementById("pc-coords").value="0,0\n2,0\n2,2\n0,2",document.getElementById("pc-allow-comp").value="500",document.getElementById("pc-allow-ten").value="50",document.getElementById("pc-fc").value="25",document.getElementById("pc-diameter").value="0.5",document.getElementById("pc-cap-thk").value="0.8",document.getElementById("pc-loadcases").value="",document.getElementById("pc-analyze").click(),setTimeout(()=>{const e=document.getElementById("pc-status").textContent;!document.getElementById("pc-results").hidden&&e.includes("complete")?console.log("\u2713 Quick test PASSED - App is functional"):console.log("\u2717 Quick test FAILED - Status:",e)},500)}window.pileCapTests={comprehensive:runComprehensiveTests,mathematical:verifyCalculations,quick:quickTest},console.log("Pile cap test suite loaded. Run:"),console.log("\u2022 pileCapTests.quick() - for basic functionality check"),console.log("\u2022 pileCapTests.mathematical() - for calculation verification"),console.log("\u2022 pileCapTests.comprehensive() - for full test suite");